(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{167:function(e,t,a){e.exports=a(304)},303:function(e,t,a){},304:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(43),l=a.n(c),i=a(46),o=a(315),u=a(45),m=a(58),s=a(311),p=a(317),d=a(319),E=a(35);function g(e){var t=e.onToggleCart;return r.a.createElement(d.a,{className:"banner"},r.a.createElement("h1",null,"It's Pizza Time"),r.a.createElement(E.a,{className:"cart-icon",inverted:!0,name:"shopping cart",onClick:t,size:"large"}))}var z="ADD_TO_CART",f="REMOVE_FROM_CART",v=a(312),h=a(308),b=function(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()},C=function(e){return parseFloat(e.toFixed(2))},y=function(e,t){return C(e+t.reduce(function(e,t){return e+t.price},0))},x=function(e){return C(e.reduce(function(e,t){return e+t.total},0))},T=function(e){return e.reduce(function(e,t){var a=t.defaultSelected,n=t.topping;return a&&e.push(n),e},[])},O=function(e,t){return e.some(function(e){return e.name===t})};function S(e){var t=e.cartItems,a=(e.total,e.onRemoveCartItemClick);return r.a.createElement(n.Fragment,null,t.map(function(e){var t=e.name,n=e.total,c=e.selectedToppings,l=e.id;return r.a.createElement(v.a,{inverted:!0,key:l},r.a.createElement(v.a.Item,null,r.a.createElement(E.a,{name:"close",onClick:a,size:"small",id:l,style:{cursor:"pointer",padding:"15px",float:"right"}}),r.a.createElement("h3",null,b(t)," pizza"),r.a.createElement("h5",{style:{textDecoration:"underline"}},"Toppings"),r.a.createElement(v.a,null,c.map(function(e){var t=e.name;return r.a.createElement(v.a.Item,{key:t},t)})),r.a.createElement("h5",{style:{textAlign:"right"}},"Total $",n.toFixed(2))),r.a.createElement(h.a,{inverted:!0}))}))}var k=Object(u.b)(function(e){return{cart:e.cart}},{removeFromCart:function(e){return{type:f,id:e.id}}})(function(e){var t=e.cart,a=t.cartItems,n=t.total,c=e.onToggleCart,l=e.removeFromCart;return r.a.createElement("div",{className:"cart-content",style:{margin:"1em"}},r.a.createElement(E.a,{name:"close",onClick:c,size:"large",style:{cursor:"pointer"}}),r.a.createElement(d.a,{dividing:!0,as:"h2",inverted:!0,textAlign:"center"},"Cart"),a.length?r.a.createElement(S,{cartItems:a,onRemoveCartItemClick:function(e,t){var a=t.id;l({id:a})},total:n}):null,r.a.createElement("h2",{style:{textAlign:"right"}},"Total $",n.toFixed(2)))}),I=a(309),j=a(320),w=a(314);function A(e){var t=e.pizza,a=t.name,n=t.basePrice,c=t.maxToppings;return r.a.createElement(j.a,{vertical:!0},r.a.createElement("h2",null,b(a)," Pizza"),r.a.createElement("p",null,"From $",n),c?r.a.createElement("p",null,"Max ",c," toppings"):r.a.createElement("p",null,"Unlimited toppings"),r.a.createElement(w.a,{basic:!0,as:I.a,to:a},"Select"))}var F=a(109),P=a(55),N=a.n(P);function _(){var e=Object(F.a)(["\n        query pizzaSizeByNameQuery {\n            pizzaSizeByName(name: ",") {\n                basePrice,\n                name,\n                maxToppings,\n                toppings {\n                    defaultSelected\n                    topping {\n                        name\n                        price\n                    }\n                }\n            }\n        }\n    "]);return _=function(){return e},e}function R(){var e=Object(F.a)(["\n    query pizzaSizesQuery {\n        pizzaSizes {\n            name\n            basePrice\n            maxToppings\n        }\n    }\n"]);return R=function(){return e},e}var B=N()(R());function D(e){return N()(_(),e)}function L(){return r.a.createElement("div",{className:"pizza-menu-content"},r.a.createElement(d.a,{as:"h2",textAlign:"center"},"Choose a Pizza"),r.a.createElement("hr",null),r.a.createElement(i.b,{query:B},function(e){var t=e.loading,a=e.error,c=e.data;return t?r.a.createElement("h4",null,"Loading Pizzas.."):(a&&console.log(a),r.a.createElement(n.Fragment,null,c.pizzaSizes.map(function(e){return r.a.createElement(A,{pizza:e,key:e.name})})))}))}var M=a(318),U=a(321),q=a(153),$=a.n(q),J=a(310),Q=a(313);function V(e){var t=e.toppings,a=e.maxToppingsReached,n=e.onCheckBoxChange,c=e.selectedToppings;return r.a.createElement(j.a,{vertical:!0},r.a.createElement(v.a,null,t.map(function(e){var t=e.topping,l=t.name,i=t.price,o=(e.defaultSelected,O(c,l));return r.a.createElement(v.a.Item,{key:l},r.a.createElement(J.a,{defaultChecked:o,disabled:!o&&a,label:l,onClick:n,price:i}))})),a?r.a.createElement(Q.a,null,"You have reached the max amount of toppings."):null)}var X=Object(U.a)(Object(u.b)(null,{addToCart:function(e){return{type:z,data:e}}})(function(e){var t=e.pizza,a=t.basePrice,c=t.maxToppings,l=t.name,i=t.toppings,o=T(i),u=y(a,o),s=Object(n.useState)(o),p=Object(m.a)(s,2),E=p[0],g=p[1],z=Object(n.useState)(u),f=Object(m.a)(z,2),v=f[0],h=f[1],x=c===E.length;return r.a.createElement(n.Fragment,null,r.a.createElement(d.a,{as:"h2",textAlign:"center"},"Customize your ",b(l)," Pizza"),r.a.createElement("hr",null),r.a.createElement(j.a,{vertical:!0},r.a.createElement("p",null,"From $",a),c?r.a.createElement("p",null,"Add maximum ",c," toppings"):r.a.createElement("p",null,"Hurray! Unlimited toppings")),r.a.createElement(V,{toppings:i,maxToppingsReached:x,onCheckBoxChange:function(e,t){var a=t.checked,n=t.label,r=t.price;a?function(e,t){g(E.concat({name:e,price:t})),h(v+t)}(n,r):function(e,t){g(E.filter(function(t){return t.name!==e})),h(v-t)}(n,r)},selectedToppings:E}),r.a.createElement("div",{style:{textAlign:"right "}},r.a.createElement("h3",null,"Total price for pizza $",v.toFixed(2)),r.a.createElement(w.a,{basic:!0,size:"large",onClick:function(){var t=e.pizza.name,a=e.addToCart,n=e.history;a({name:t,id:$()(),selectedToppings:E,total:C(v)}),n.push("/")}},"Add to cart")))}));function G(e){var t=e.match.params.pizzaSize.toUpperCase();return["SMALL","MEDIUM","LARGE"].indexOf(t)<0?r.a.createElement(M.a,{to:"/"}):r.a.createElement("div",{className:"pizza-menu-content"},r.a.createElement(I.a,{to:"/"},"Back to menu"),r.a.createElement(i.b,{query:D(t)},function(e){var t=e.loading,a=e.error,n=e.data;return t?r.a.createElement("h4",null,"Loading Pizza Details.."):(a&&console.log(a),r.a.createElement(X,{pizza:n.pizzaSizeByName}))}))}function H(){var e=Object(n.useState)(!0),t=Object(m.a)(e,2),a=t[0],c=t[1],l=function(){return c(!a)};return r.a.createElement("div",{className:"main-content"},r.a.createElement(g,{onToggleCart:l}),r.a.createElement(p.a.Pushable,null,r.a.createElement(p.a,{animation:"overlay",className:"cart-sidebar",direction:"right",icon:"labeled",vertical:"true",visible:a,width:"wide"},r.a.createElement(k,{onToggleCart:l})),r.a.createElement(p.a.Pusher,null,r.a.createElement(s.a,{exact:!0,path:"/",component:L}),r.a.createElement(s.a,{exact:!0,path:"/:pizzaSize",component:G}))))}var Y=new(a(155).a)({uri:"https://core-graphql.dev.waldo.photos/pizza"}),K=a(47),W=a(110),Z={cartItems:[],total:0};var ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,te=Object(K.b)({cart:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case z:return e=t.cartItems.concat(a.data),Object(W.a)({},t,{cartItems:e,total:x(e)});case f:return e=t.cartItems.filter(function(e){return e.id!==a.id}),Object(W.a)({},t,{cartItems:e,total:x(e)});default:return t}}}),ae=ee?Object(K.c)(te,ee()):Object(K.c)(te);a(302),a(303);l.a.render(r.a.createElement(function(){return r.a.createElement(i.a,{client:Y},r.a.createElement(u.a,{store:ae},r.a.createElement(o.a,null,r.a.createElement(H,null))))},null),document.getElementById("root"))}},[[167,1,2]]]);
//# sourceMappingURL=main.9cf62f1d.chunk.js.map